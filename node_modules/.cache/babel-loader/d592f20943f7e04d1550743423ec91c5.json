{"ast":null,"code":"var _jsxFileName = \"/Users/yixingyao/Desktop/CS 639 - Building User Interface/react1-beta-arabellayao/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport { Alert } from 'react-bootstrap';\nimport { Jumbotron } from 'react-bootstrap';\nimport { Button } from 'react-bootstrap';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: {},\n      filteredCourses: {},\n      subjects: [],\n      cartCourses: {},\n      // representation of course\n      activeKey: '' // format: {course.number: {section.number: [subsections]}}\n\n    }; // scope of callback functions is within App.js\n\n    this.isInCart = this.isInCart.bind(this);\n    this.addToCart = this.addToCart.bind(this);\n    this.removeFromCart = this.removeFromCart.bind(this);\n  } // have 3 parameters for all cart methods: course, section, subsection\n\n  /*\n  course: course.number\n  section: section.number (undefined for course button)\n  subsection: subsection. number (undefined for section button)\n  This method determines whether a button is \"Add\" or \"Remove\"\n  */\n\n\n  isInCart(course, section, subsection) {\n    if (!(course in this.state.cartCourses)) {\n      return false;\n    } else if (!section) {\n      // course button is \"Add\" if course is in cart\n      return true;\n    } else if (!(section in this.state.cartCourses[course])) {\n      return false;\n    } else if (!subsection) {\n      // section button is \"Add\" if section is in cart\n      return true;\n    } else if (!this.state.cartCourses[course][section].includes(subsection)) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n  /*\n  course_info: complete course info\n  section_info: complete section info (\"All\" for course button)\n  subsection_info: complete subsection info (\"All for subsection button\")\n  This method adds three variations to cart: 1) a course + all sections + subsections; 2) a course + a section + all subsections; 3) a course + a section + a subsection\n  */\n\n\n  addToCart(course_info, section_info, subsection_info) {\n    // cart {course: {section: [subsection]}}\n    // cart[\"PSYCH202\"] = {};\n    // cart[\"PSYCH202\"][\"LEC001\"] = []\n    // cart[\"PSYCH202\"][\"LEC001\"].push(\"Subsection\")\n    // console.log(course_info, section_info, subsection_info);\n    // console.log(this.state.allCourses);\n    // local variable for easy reference\n    var cart_temp = this.state.cartCourses;\n\n    if (!(course_info.number in cart_temp)) {\n      // course not in cart, create a key-value pair\n      cart_temp[course_info.number] = {};\n    }\n\n    if (section_info === \"All\") {\n      // course button\n      for (const section of course_info.sections) {\n        cart_temp[course_info.number][section.number] = [];\n\n        for (const subsection of section.subsections) {\n          cart_temp[course_info.number][section.number].push(subsection.number);\n        }\n      }\n    } else if (subsection_info === \"All\") {\n      // section button\n      cart_temp[course_info.number][section_info.number] = [];\n\n      for (const subsection of section_info.subsections) {\n        cart_temp[course_info.number][section_info.number].push(subsection.number);\n      }\n    } else {\n      // subsection button\n      if (!(section_info.number in cart_temp[course_info.number])) {\n        // section not added, add section\n        cart_temp[course_info.number][section_info.number] = [];\n      }\n\n      cart_temp[course_info.number][section_info.number].push(subsection_info.number);\n    }\n\n    this.setState({\n      cartCourses: cart_temp\n    });\n  }\n\n  removeFromCart(course, section, subsection) {\n    // cart[\"PSYCH202\"][\"LEC001\"].remove(\"Subsection\")\n    // delete cart[\"PSYCH202\"][\"LEC001\"]\n    // delete cart[\"PSYCH202\"]\n    // also remove parents if zero is left\n    // create a local variable\n    var cart_temp = this.state.cartCourses;\n\n    if (!section) {\n      // remove the whole course\n      delete cart_temp[course];\n    } else if (!subsection) {\n      // remove the whole section\n      delete cart_temp[course][section];\n\n      if (!Object.keys(cart_temp[course]).length) {\n        delete cart_temp[course];\n      }\n    } else {\n      // delete a subsection\n      let index = cart_temp[course][section].indexOf(subsection);\n      cart_temp[course][section].splice(index, 1);\n\n      if (!cart_temp[course][section].length) {\n        delete cart_temp[course][section];\n      }\n\n      if (!Object.keys(cart_temp[course]).length) {\n        delete cart_temp[course];\n      }\n    }\n\n    this.setState({\n      cartCourses: cart_temp\n    });\n  }\n\n  componentDidMount() {\n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/classes').then(res => res.json()).then(data => this.setState({\n      allCourses: data,\n      filteredCourses: data,\n      subjects: this.getSubjects(data)\n    }));\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for (const course of Object.values(data)) {\n      if (subjects.indexOf(course.subject) === -1) subjects.push(course.subject);\n    }\n\n    return subjects;\n  }\n\n  setCourses(courses) {\n    this.setState({\n      filteredCourses: courses\n    });\n  }\n\n  handleSearch() {\n    this.setState({\n      activeKey: \"search\"\n    });\n  }\n\n  render() {\n    // convert cartCourses representation to actual information\n    var full_cart = [];\n\n    for (const course of Object.values(this.state.allCourses)) {\n      if (course.number in this.state.cartCourses) {\n        // pass the info of cartCourses to Cart tab\n        full_cart.push(course);\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"link\", {\n      rel: \"stylesheet\",\n      href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\",\n      integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\",\n      crossOrigin: \"anonymous\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Tabs, {\n      defaultActiveKey: \"home\",\n      activeKey: this.state.activeKey,\n      style: {\n        position: 'fixed',\n        zIndex: 1,\n        width: '100%',\n        backgroundColor: 'white'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"home\",\n      title: \"Home\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '5vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Jumbotron, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 15\n      }\n    }, \" Welcome to Badger Course Enrollment! \"), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 15\n      }\n    }, \" Use Search to search for courses\"), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 15\n      }\n    }, \" Check out your courses added in cart\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: handleSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 15\n      }\n    }, \"Go to Search\")))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"search\",\n      title: \"Search\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      setCourses: courses => this.setCourses(courses),\n      courses: this.state.allCourses,\n      subjects: this.state.subjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '20vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: this.state.filteredCourses,\n      allData: this.state.allCourses,\n      addToCart: this.addToCart,\n      removeFromCart: this.removeFromCart,\n      isInCart: this.isInCart,\n      cartMode: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"cart\",\n      title: \"Cart\",\n      style: {\n        paddingTop: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginLeft: '5vw'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CourseArea, {\n      data: full_cart,\n      addToCart: this.addToCart,\n      removeFromCart: this.removeFromCart,\n      isInCart: this.isInCart,\n      cartMode: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 15\n      }\n    }), full_cart.length === 0 && /*#__PURE__*/React.createElement(Alert, {\n      variant: \"warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 40\n      }\n    }, \"Your cart is empty. \"), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 15\n      }\n    }, \"Please Search and add more courses to your cart.\"))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/yixingyao/Desktop/CS 639 - Building User Interface/react1-beta-arabellayao/src/App.js"],"names":["React","Tabs","Tab","Sidebar","CourseArea","Alert","Jumbotron","Button","App","Component","constructor","props","state","allCourses","filteredCourses","subjects","cartCourses","activeKey","isInCart","bind","addToCart","removeFromCart","course","section","subsection","includes","course_info","section_info","subsection_info","cart_temp","number","sections","subsections","push","setState","Object","keys","length","index","indexOf","splice","componentDidMount","fetch","then","res","json","data","getSubjects","values","subject","setCourses","courses","handleSearch","render","full_cart","position","zIndex","width","backgroundColor","paddingTop","marginLeft"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,KAAT,QAAsB,iBAAtB;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SAASC,MAAT,QAAuB,iBAAvB;;AAEA,MAAMC,GAAN,SAAkBR,KAAK,CAACS,SAAxB,CAAkC;AAChCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,UAAU,EAAE,EADD;AAEXC,MAAAA,eAAe,EAAE,EAFN;AAGXC,MAAAA,QAAQ,EAAE,EAHC;AAIXC,MAAAA,WAAW,EAAE,EAJF;AAIM;AACjBC,MAAAA,SAAS,EAAE,EALA,CAMX;;AANW,KAAb,CAFiB,CAWjB;;AACA,SAAKC,QAAL,GAAgB,KAAKA,QAAL,CAAcC,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKE,cAAL,GAAsB,KAAKA,cAAL,CAAoBF,IAApB,CAAyB,IAAzB,CAAtB;AACD,GAhB+B,CAmBhC;;AAEA;;;;;;;;AAMAD,EAAAA,QAAQ,CAACI,MAAD,EAASC,OAAT,EAAkBC,UAAlB,EAA8B;AACpC,QAAI,EAAGF,MAAM,IAAI,KAAKV,KAAL,CAAWI,WAAxB,CAAJ,EAA0C;AACxC,aAAO,KAAP;AACD,KAFD,MAGK,IAAI,CAACO,OAAL,EAAc;AACjB;AACA,aAAO,IAAP;AACD,KAHI,MAIA,IAAI,EAAGA,OAAO,IAAI,KAAKX,KAAL,CAAWI,WAAX,CAAuBM,MAAvB,CAAd,CAAJ,EAAmD;AACtD,aAAO,KAAP;AACD,KAFI,MAGA,IAAI,CAACE,UAAL,EAAiB;AACpB;AACA,aAAO,IAAP;AACD,KAHI,MAIA,IAAI,CAAG,KAAKZ,KAAL,CAAWI,WAAX,CAAuBM,MAAvB,EAA+BC,OAA/B,EAAwCE,QAAxC,CAAiDD,UAAjD,CAAP,EAAsE;AACzE,aAAO,KAAP;AACD,KAFI,MAGA;AACH,aAAO,IAAP;AACD;AAGF;AAGD;;;;;;;;AAMAJ,EAAAA,SAAS,CAACM,WAAD,EAAcC,YAAd,EAA4BC,eAA5B,EAA6C;AACpD;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA,QAAIC,SAAS,GAAG,KAAKjB,KAAL,CAAWI,WAA3B;;AAEA,QAAI,EAAEU,WAAW,CAACI,MAAZ,IAAsBD,SAAxB,CAAJ,EAAwC;AACtC;AACAA,MAAAA,SAAS,CAACH,WAAW,CAACI,MAAb,CAAT,GAAgC,EAAhC;AACD;;AAGD,QAAIH,YAAY,KAAK,KAArB,EAA4B;AAAE;AAC5B,WAAK,MAAMJ,OAAX,IAAsBG,WAAW,CAACK,QAAlC,EAA4C;AAC1CF,QAAAA,SAAS,CAACH,WAAW,CAACI,MAAb,CAAT,CAA8BP,OAAO,CAACO,MAAtC,IAAgD,EAAhD;;AACA,aAAK,MAAMN,UAAX,IAAyBD,OAAO,CAACS,WAAjC,EAA8C;AAC5CH,UAAAA,SAAS,CAACH,WAAW,CAACI,MAAb,CAAT,CAA8BP,OAAO,CAACO,MAAtC,EAA8CG,IAA9C,CAAmDT,UAAU,CAACM,MAA9D;AACD;AACF;AACF,KAPD,MAQK,IAAIF,eAAe,KAAK,KAAxB,EAA+B;AAAE;AACpCC,MAAAA,SAAS,CAACH,WAAW,CAACI,MAAb,CAAT,CAA8BH,YAAY,CAACG,MAA3C,IAAqD,EAArD;;AACA,WAAK,MAAMN,UAAX,IAAyBG,YAAY,CAACK,WAAtC,EAAmD;AACjDH,QAAAA,SAAS,CAACH,WAAW,CAACI,MAAb,CAAT,CAA8BH,YAAY,CAACG,MAA3C,EAAmDG,IAAnD,CAAwDT,UAAU,CAACM,MAAnE;AACD;AACF,KALI,MAMA;AAAE;AACL,UAAI,EAAEH,YAAY,CAACG,MAAb,IAAuBD,SAAS,CAACH,WAAW,CAACI,MAAb,CAAlC,CAAJ,EAA6D;AAAE;AAC7DD,QAAAA,SAAS,CAACH,WAAW,CAACI,MAAb,CAAT,CAA8BH,YAAY,CAACG,MAA3C,IAAqD,EAArD;AACD;;AACDD,MAAAA,SAAS,CAACH,WAAW,CAACI,MAAb,CAAT,CAA8BH,YAAY,CAACG,MAA3C,EAAmDG,IAAnD,CAAwDL,eAAe,CAACE,MAAxE;AACD;;AAED,SAAKI,QAAL,CAAc;AAAClB,MAAAA,WAAW,EAAEa;AAAd,KAAd;AACD;;AAEDR,EAAAA,cAAc,CAACC,MAAD,EAASC,OAAT,EAAkBC,UAAlB,EAA8B;AAC1C;AACA;AACA;AACA;AAEA;AACA,QAAIK,SAAS,GAAG,KAAKjB,KAAL,CAAWI,WAA3B;;AAEA,QAAI,CAACO,OAAL,EAAc;AAAE;AACd,aAAOM,SAAS,CAACP,MAAD,CAAhB;AACD,KAFD,MAGK,IAAI,CAACE,UAAL,EAAiB;AAAE;AACtB,aAAOK,SAAS,CAACP,MAAD,CAAT,CAAkBC,OAAlB,CAAP;;AACA,UAAI,CAACY,MAAM,CAACC,IAAP,CAAYP,SAAS,CAACP,MAAD,CAArB,EAA+Be,MAApC,EAA4C;AAC1C,eAAOR,SAAS,CAACP,MAAD,CAAhB;AACD;AACF,KALI,MAMA;AAAE;AACL,UAAIgB,KAAK,GAAGT,SAAS,CAACP,MAAD,CAAT,CAAkBC,OAAlB,EAA2BgB,OAA3B,CAAmCf,UAAnC,CAAZ;AACAK,MAAAA,SAAS,CAACP,MAAD,CAAT,CAAkBC,OAAlB,EAA2BiB,MAA3B,CAAkCF,KAAlC,EAAyC,CAAzC;;AAEA,UAAI,CAACT,SAAS,CAACP,MAAD,CAAT,CAAkBC,OAAlB,EAA2Bc,MAAhC,EAAwC;AACtC,eAAOR,SAAS,CAACP,MAAD,CAAT,CAAkBC,OAAlB,CAAP;AACD;;AAED,UAAI,CAACY,MAAM,CAACC,IAAP,CAAYP,SAAS,CAACP,MAAD,CAArB,EAA+Be,MAApC,EAA4C;AAC1C,eAAOR,SAAS,CAACP,MAAD,CAAhB;AACD;AACF;;AAED,SAAKY,QAAL,CAAc;AAAClB,MAAAA,WAAW,EAAEa;AAAd,KAAd;AACD;;AAEDY,EAAAA,iBAAiB,GAAG;AAClBC,IAAAA,KAAK,CAAC,uDAAD,CAAL,CAA+DC,IAA/D,CACEC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADT,EAEEF,IAFF,CAEOG,IAAI,IAAI,KAAKZ,QAAL,CAAc;AAACrB,MAAAA,UAAU,EAAEiC,IAAb;AAAmBhC,MAAAA,eAAe,EAAEgC,IAApC;AAA0C/B,MAAAA,QAAQ,EAAE,KAAKgC,WAAL,CAAiBD,IAAjB;AAApD,KAAd,CAFf;AAGD;;AAEDC,EAAAA,WAAW,CAACD,IAAD,EAAO;AAChB,QAAI/B,QAAQ,GAAG,EAAf;AACAA,IAAAA,QAAQ,CAACkB,IAAT,CAAc,KAAd;;AAEA,SAAI,MAAMX,MAAV,IAAoBa,MAAM,CAACa,MAAP,CAAcF,IAAd,CAApB,EAAyC;AACvC,UAAG/B,QAAQ,CAACwB,OAAT,CAAiBjB,MAAM,CAAC2B,OAAxB,MAAqC,CAAC,CAAzC,EACElC,QAAQ,CAACkB,IAAT,CAAcX,MAAM,CAAC2B,OAArB;AACH;;AAED,WAAOlC,QAAP;AACD;;AAEDmC,EAAAA,UAAU,CAACC,OAAD,EAAU;AAClB,SAAKjB,QAAL,CAAc;AAACpB,MAAAA,eAAe,EAAEqC;AAAlB,KAAd;AACD;;AAEDC,EAAAA,YAAY,GAAG;AACb,SAAKlB,QAAL,CAAc;AAACjB,MAAAA,SAAS,EAAE;AAAZ,KAAd;AACD;;AAEDoC,EAAAA,MAAM,GAAG;AAEP;AACA,QAAIC,SAAS,GAAG,EAAhB;;AAEA,SAAK,MAAMhC,MAAX,IAAqBa,MAAM,CAACa,MAAP,CAAc,KAAKpC,KAAL,CAAWC,UAAzB,CAArB,EAA2D;AACzD,UAAIS,MAAM,CAACQ,MAAP,IAAiB,KAAKlB,KAAL,CAAWI,WAAhC,EAA6C;AAC3C;AACAsC,QAAAA,SAAS,CAACrB,IAAV,CAAeX,MAAf;AACD;AACF;;AAED,wBACE,uDACE;AACE,MAAA,GAAG,EAAC,YADN;AAEE,MAAA,IAAI,EAAC,uEAFP;AAGE,MAAA,SAAS,EAAC,yEAHZ;AAIE,MAAA,WAAW,EAAC,WAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAUE,oBAAC,IAAD;AAAM,MAAA,gBAAgB,EAAC,MAAvB;AAA8B,MAAA,SAAS,EAAE,KAAKV,KAAL,CAAWK,SAApD;AAA+D,MAAA,KAAK,EAAE;AAACsC,QAAAA,QAAQ,EAAE,OAAX;AAAoBC,QAAAA,MAAM,EAAE,CAA5B;AAA+BC,QAAAA,KAAK,EAAE,MAAtC;AAA8CC,QAAAA,eAAe,EAAE;AAA/D,OAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,MAAd;AAAqB,MAAA,KAAK,EAAC,MAA3B;AAAkC,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAHF,eAIE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAER,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJF,CADF,CADA,CAFF,eAaE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,QAAd;AAAuB,MAAA,KAAK,EAAC,QAA7B;AAAsC,MAAA,KAAK,EAAE;AAACO,QAAAA,UAAU,EAAE;AAAb,OAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AAAS,MAAA,UAAU,EAAGR,OAAD,IAAa,KAAKD,UAAL,CAAgBC,OAAhB,CAAlC;AAA4D,MAAA,OAAO,EAAE,KAAKvC,KAAL,CAAWC,UAAhF;AAA4F,MAAA,QAAQ,EAAE,KAAKD,KAAL,CAAWG,QAAjH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAEE;AAAK,MAAA,KAAK,EAAE;AAAC6C,QAAAA,UAAU,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAE,KAAKhD,KAAL,CAAWE,eAA7B;AAA8C,MAAA,OAAO,EAAE,KAAKF,KAAL,CAAWC,UAAlE;AAA8E,MAAA,SAAS,EAAE,KAAKO,SAA9F;AAAyG,MAAA,cAAc,EAAE,KAAKC,cAA9H;AAA6I,MAAA,QAAQ,EAAE,KAAKH,QAA5J;AAAsK,MAAA,QAAQ,EAAE,KAAhL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAFF,CAbF,eAoBE,oBAAC,GAAD;AAAK,MAAA,QAAQ,EAAC,MAAd;AAAqB,MAAA,KAAK,EAAC,MAA3B;AAAkC,MAAA,KAAK,EAAE;AAACyC,QAAAA,UAAU,EAAE;AAAb,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,KAAK,EAAE;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AAAY,MAAA,IAAI,EAAEN,SAAlB;AAA6B,MAAA,SAAS,EAAE,KAAKlC,SAA7C;AAAwD,MAAA,cAAc,EAAE,KAAKC,cAA7E;AAA6F,MAAA,QAAQ,EAAE,KAAKH,QAA5G;AAAsH,MAAA,QAAQ,EAAE,IAAhI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEGoC,SAAS,CAACjB,MAAV,KAAqB,CAArB,iBACD,oBAAC,KAAD;AAAO,MAAA,OAAO,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAzB,eACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DADA,CAHF,CADF,CApBF,CAVF,CADF;AA0CD;;AAvN+B;;AA0NlC,eAAe7B,GAAf","sourcesContent":["import React from 'react';\nimport './App.css';\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\nimport Sidebar from './Sidebar';\nimport CourseArea from './CourseArea';\nimport { Alert } from 'react-bootstrap';\nimport { Jumbotron } from 'react-bootstrap';\nimport { Button } from 'react-bootstrap';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      allCourses: {},\n      filteredCourses: {},\n      subjects: [],\n      cartCourses: {}, // representation of course\n      activeKey: ''\n      // format: {course.number: {section.number: [subsections]}}\n    };\n\n    // scope of callback functions is within App.js\n    this.isInCart = this.isInCart.bind(this);\n    this.addToCart = this.addToCart.bind(this);\n    this.removeFromCart = this.removeFromCart.bind(this);\n  }\n\n\n  // have 3 parameters for all cart methods: course, section, subsection\n\n  /*\n  course: course.number\n  section: section.number (undefined for course button)\n  subsection: subsection. number (undefined for section button)\n  This method determines whether a button is \"Add\" or \"Remove\"\n  */\n  isInCart(course, section, subsection) {\n    if (! (course in this.state.cartCourses)) {\n      return false;\n    }\n    else if (!section) { \n      // course button is \"Add\" if course is in cart\n      return true;\n    }\n    else if (! (section in this.state.cartCourses[course])) {\n      return false;\n    }\n    else if (!subsection) {\n      // section button is \"Add\" if section is in cart\n      return true;\n    }\n    else if (! (this.state.cartCourses[course][section].includes(subsection))) {\n      return false;\n    }\n    else {\n      return true;\n    }\n\n    \n  }\n\n\n  /*\n  course_info: complete course info\n  section_info: complete section info (\"All\" for course button)\n  subsection_info: complete subsection info (\"All for subsection button\")\n  This method adds three variations to cart: 1) a course + all sections + subsections; 2) a course + a section + all subsections; 3) a course + a section + a subsection\n  */\n  addToCart(course_info, section_info, subsection_info) {\n    // cart {course: {section: [subsection]}}\n    // cart[\"PSYCH202\"] = {};\n    // cart[\"PSYCH202\"][\"LEC001\"] = []\n    // cart[\"PSYCH202\"][\"LEC001\"].push(\"Subsection\")\n\n    // console.log(course_info, section_info, subsection_info);\n    // console.log(this.state.allCourses);\n\n    // local variable for easy reference\n    var cart_temp = this.state.cartCourses;\n\n    if (!(course_info.number in cart_temp)) { \n      // course not in cart, create a key-value pair\n      cart_temp[course_info.number] = {};\n    }\n\n\n    if (section_info === \"All\") { // course button\n      for (const section of course_info.sections) {\n        cart_temp[course_info.number][section.number] = []; \n        for (const subsection of section.subsections) {\n          cart_temp[course_info.number][section.number].push(subsection.number);\n        }\n      }\n    }\n    else if (subsection_info === \"All\") { // section button\n      cart_temp[course_info.number][section_info.number] = [];\n      for (const subsection of section_info.subsections) {\n        cart_temp[course_info.number][section_info.number].push(subsection.number);\n      }\n    }\n    else { // subsection button\n      if (!(section_info.number in cart_temp[course_info.number])) { // section not added, add section\n        cart_temp[course_info.number][section_info.number] = [];\n      }\n      cart_temp[course_info.number][section_info.number].push(subsection_info.number);\n    }\n\n    this.setState({cartCourses: cart_temp});\n  }\n\n  removeFromCart(course, section, subsection) {\n    // cart[\"PSYCH202\"][\"LEC001\"].remove(\"Subsection\")\n    // delete cart[\"PSYCH202\"][\"LEC001\"]\n    // delete cart[\"PSYCH202\"]\n    // also remove parents if zero is left\n\n    // create a local variable\n    var cart_temp = this.state.cartCourses;\n\n    if (!section) { // remove the whole course\n      delete cart_temp[course];\n    }\n    else if (!subsection) { // remove the whole section\n      delete cart_temp[course][section];\n      if (!Object.keys(cart_temp[course]).length) {\n        delete cart_temp[course];\n      }\n    }\n    else { // delete a subsection\n      let index = cart_temp[course][section].indexOf(subsection);\n      cart_temp[course][section].splice(index, 1);\n\n      if (!cart_temp[course][section].length) {\n        delete cart_temp[course][section];\n      }\n\n      if (!Object.keys(cart_temp[course]).length) {\n        delete cart_temp[course];\n      }\n    }\n\n    this.setState({cartCourses: cart_temp});\n  }\n\n  componentDidMount() {\n    fetch('http://mysqlcs639.cs.wisc.edu:53706/api/react/classes').then(\n      res => res.json()\n    ).then(data => this.setState({allCourses: data, filteredCourses: data, subjects: this.getSubjects(data)}));\n  }\n\n  getSubjects(data) {\n    let subjects = [];\n    subjects.push(\"All\");\n\n    for(const course of Object.values(data)) {\n      if(subjects.indexOf(course.subject) === -1)\n        subjects.push(course.subject);\n    }\n\n    return subjects;\n  }\n\n  setCourses(courses) {\n    this.setState({filteredCourses: courses})\n  }\n\n  handleSearch() {\n    this.setState({activeKey: \"search\"});\n  }\n\n  render() {\n\n    // convert cartCourses representation to actual information\n    var full_cart = [];\n\n    for (const course of Object.values(this.state.allCourses)) {\n      if (course.number in this.state.cartCourses) {\n        // pass the info of cartCourses to Cart tab\n        full_cart.push(course);\n      }\n    }\n\n    return (\n      <>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\n          integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\"\n          crossOrigin=\"anonymous\"\n        />\n\n\n\n        <Tabs defaultActiveKey=\"home\" activeKey={this.state.activeKey} style={{position: 'fixed', zIndex: 1, width: '100%', backgroundColor: 'white'}}>\n\n          <Tab eventKey=\"home\" title=\"Home\" style={{paddingTop: '5vh'}}>\n          <div style={{marginLeft: '5vw'}}>\n            <Jumbotron>\n              <h1> Welcome to Badger Course Enrollment! </h1>\n              <h2> Use Search to search for courses</h2>\n              <h2> Check out your courses added in cart</h2>\n              <Button onClick={handleSearch}>Go to Search</Button>\n            </Jumbotron>\n          </div>\n          </Tab>\n\n          <Tab eventKey=\"search\" title=\"Search\" style={{paddingTop: '5vh'}}>\n            <Sidebar setCourses={(courses) => this.setCourses(courses)} courses={this.state.allCourses} subjects={this.state.subjects}/>\n            <div style={{marginLeft: '20vw'}}>\n              <CourseArea data={this.state.filteredCourses} allData={this.state.allCourses} addToCart={this.addToCart} removeFromCart={this.removeFromCart}isInCart={this.isInCart} cartMode={false} />\n          </div>\n          </Tab>\n\n          <Tab eventKey=\"cart\" title=\"Cart\" style={{paddingTop: '5vh'}}>\n            <div style={{marginLeft: '5vw'}}>\n              <CourseArea data={full_cart} addToCart={this.addToCart} removeFromCart={this.removeFromCart} isInCart={this.isInCart} cartMode={true}/>\n              {full_cart.length === 0 && \n              <Alert variant=\"warning\"><h1>Your cart is empty. </h1>\n              <h2>Please Search and add more courses to your cart.</h2></Alert>}\n            </div>\n          </Tab>\n        </Tabs> \n      </>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}